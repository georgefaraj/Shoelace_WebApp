<html>
<header>
  <title>Campaign Builder</title>
</header>
<body>

  
<form action="MICA.php" id="MICAform" method="POST" target="_blank">
  Title:<br>
  <input type="text" name="title1" id="title1" value="Default Title 1">
  <br>
  <br>
  <input type="text" name="title2" id="title2" value="Default Title 2">
  <br>
  <br>
  <input type="text" name="title3" id="title3" value="Default Title 3">
  <br>
  <br>
  
  Ad Copy:<br>
  <textarea rows="4" cols="50" name="ad_copy1" id="ad_copy1" form="MICAform">Default Text 1</textarea>
  <br>
  <br>
  <textarea rows="4" cols="50" name="ad_copy2" id="ad_copy2" form="MICAform">Default Text 2</textarea>
  <br>
  <br>
  <textarea rows="4" cols="50" name="ad_copy3" id="ad_copy3" form="MICAform">Default Text 3</textarea>
  <br>
  <br>

  Campaign Objective:<br>
  <input type="text" name="camp_obj" id="camp_obj" value="Conversions">
  <br>
  <br>

  Image URL:<br>
  <input type="text" name="img_src1" id="img_src1" value="">
  <input type="text" name="img_src2" id="img_src2" value="">
  <input type="text" name="img_src3" id="img_src3" value="">

  <br><br>
  <input type="submit" name="publish" value="Publish">
  <input type="submit" name="save" value="Save">
</form> 


<script>
  var URLin = window.location.search;
  if(URLin.includes("?")){
    if(URLin.includes("*")){
      var data = window.prompt("Please enter the given JSON","");
      if (data == null || data == "" || !isValidJson(data)) {
        window.alert("The data entered was incorrected");
        window.history.back();
      } 

      data = JSON.parse(data);

      var T1 = document.getElementById("title1");
      var A1 = document.getElementById("ad_copy1");
      var I1 = document.getElementById("img_src1");
      var C1 = document.getElementById("camp_obj1");

      var T2 = document.getElementById("title2");
      var A2 = document.getElementById("ad_copy2");
      var I2 = document.getElementById("img_src2");
      var C2 = document.getElementById("camp_obj2");

      var T3 = document.getElementById("title3");
      var A3 = document.getElementById("ad_copy3");
      var I3 = document.getElementById("img_src3");
      var C3 = document.getElementById("camp_obj3");

      T1.value = data.title1;
      A1.innerHTML = data.ad_copy1;
      I1.value = data.img_src1;
      C1.value = data.camp_obj1;

      T2.value = data.title2;
      A2.innerHTML = data.ad_copy2;
      I2.value = data.img_src2;
      C2.value = data.camp_obj2;

      T3.value = data.title3;
      A3.innerHTML = data.ad_copy3;
      I3.value = data.img_src3;
      C3.value = data.camp_obj3;
    }
  }

    function isValidJson(json) {
      try {
          JSON.parse(json);
          return true;
      } catch (e) {
          return false;
      }
    }
</script>

</body>
</html>